local ScreenGui = Instance.new("ScreenGui")
local MainFrame = Instance.new("Frame")
local TabHolder = Instance.new("Frame")
local ContentHolder = Instance.new("Frame")
local Title = Instance.new("TextLabel")

ScreenGui.Name = "DarkByte_Ultimate"
ScreenGui.Parent = game:GetService("CoreGui")

-- Hlavní okno
MainFrame.Parent = ScreenGui
MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
MainFrame.Position = UDim2.new(0.5, -175, 0.4, 0)
MainFrame.Size = UDim2.new(0, 350, 0, 280)
MainFrame.Active = true
MainFrame.Draggable = true
Instance.new("UICorner", MainFrame)

Title.Parent = MainFrame
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Text = "DARK BYTE ULTIMATE"
Title.TextColor3 = Color3.fromRGB(0, 170, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold
Title.TextSize = 18

-- Kategorie
TabHolder.Parent = MainFrame
TabHolder.Position = UDim2.new(0, 5, 0, 45)
TabHolder.Size = UDim2.new(0, 90, 1, -50)
TabHolder.BackgroundTransparency = 1

ContentHolder.Parent = MainFrame
ContentHolder.Position = UDim2.new(0, 100, 0, 45)
ContentHolder.Size = UDim2.new(1, -110, 1, -50)
ContentHolder.BackgroundTransparency = 1

local VisualFrame = Instance.new("ScrollingFrame", ContentHolder)
local PlayerFrame = Instance.new("ScrollingFrame", ContentHolder)
for _, f in pairs({VisualFrame, PlayerFrame}) do
    f.Size = UDim2.new(1, 0, 1, 0)
    f.BackgroundTransparency = 1
    f.Visible = false
    f.ScrollBarThickness = 0
end
VisualFrame.Visible = true

-- FUNKCE PRO TLAČÍTKA A SLIDERY
local function createBtn(text, parent, pos, func)
    local btn = Instance.new("TextButton", parent)
    btn.Size = UDim2.new(0.9, 0, 0, 35)
    btn.Position = pos
    btn.Text = text
    btn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    Instance.new("UICorner", btn)
    btn.MouseButton1Click:Connect(func)
    return btn
end

local function createSlider(name, parent, min, max, pos, callback)
    local sliderFrame = Instance.new("Frame", parent)
    sliderFrame.Size = UDim2.new(0.9, 0, 0, 50)
    sliderFrame.Position = pos
    sliderFrame.BackgroundTransparency = 1
    local label = Instance.new("TextLabel", sliderFrame)
    label.Size = UDim2.new(1, 0, 0, 20)
    label.Text = name .. ": " .. min
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.BackgroundTransparency = 1
    local bar = Instance.new("Frame", sliderFrame)
    bar.Size = UDim2.new(1, 0, 0, 4)
    bar.Position = UDim2.new(0, 0, 0, 30)
    bar.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    local dot = Instance.new("TextButton", bar)
    dot.Size = UDim2.new(0, 14, 0, 14)
    dot.Position = UDim2.new(0, 0, 0.5, -7)
    dot.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    dot.Text = ""
    Instance.new("UICorner", dot).CornerRadius = UDim.new(1, 0)
    local dragging = false
    dot.InputBegan:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = true end end)
    game:GetService("UserInputService").InputEnded:Connect(function(i) if i.UserInputType == Enum.UserInputType.MouseButton1 or i.UserInputType == Enum.UserInputType.Touch then dragging = false end end)
    game:GetService("RunService").RenderStepped:Connect(function()
        if dragging then
            local mousePos = game:GetService("UserInputService"):GetMouseLocation().X
            local relPos = math.clamp((mousePos - bar.AbsolutePosition.X) / bar.AbsoluteSize.X, 0, 1)
            dot.Position = UDim2.new(relPos, -7, 0.5, -7)
            local val = math.floor(min + (max - min) * relPos)
            label.Text = name .. ": " .. val
            callback(val)
        end
    end)
end

-- SEKCE VISUAL
createBtn("Get BTools (3 Tools)", VisualFrame, UDim2.new(0,0,0,5), function()
    local p = game.Players.LocalPlayer.Backpack
    Instance.new("HopperBin", p).BinType = "Delete"
    Instance.new("HopperBin", p).BinType = "Clone"
    Instance.new("HopperBin", p).BinType = "Move"
end)

-- SEKCE PLAYER
createSlider("Speed", PlayerFrame, 16, 1000, UDim2.new(0,0,0,5), function(v)
    game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = v
end)

createSlider("Jump", PlayerFrame, 50, 1000, UDim2.new(0,0,0,60), function(v)
    game.Players.LocalPlayer.Character.Humanoid.JumpPower = v
end)

-- JOYSTICK FLY
local flying = false
local flySpeed = 50
createBtn("Fly: OFF", PlayerFrame, UDim2.new(0,0,0,120), function(btn)
    flying = not flying
    btn.Text = "Fly: " .. (flying and "ON" or "OFF")
    btn.TextColor3 = flying and Color3.fromRGB(0, 255, 100) or Color3.fromRGB(255, 255, 255)
    local char = game.Players.LocalPlayer.Character
    local root = char.HumanoidRootPart
    if flying then
        local bv = Instance.new("BodyVelocity", root)
        bv.MaxForce = Vector3.new(1e6, 1e6, 1e6)
        bv.Velocity = Vector3.new(0,0,0)
        task.spawn(function()
            while flying do
                local dir = char.Humanoid.MoveDirection
                local cam = workspace.CurrentCamera.CFrame
                bv.Velocity = (cam.LookVector * dir.Z + cam.RightVector * dir.X) * flySpeed
                if dir == Vector3.new(0,0,0) then bv.Velocity = Vector3.new(0,0,0) end
                task.wait()
            end
            bv:Destroy()
        end)
    end
end)

-- PŘEPÍNÁNÍ KATEGORIÍ
createBtn("Visual", TabHolder, UDim2.new(0,0,0,0), function() VisualFrame.Visible = true PlayerFrame.Visible = false end)
createBtn("Player", TabHolder, UDim2.new(0,0,0,45), function() VisualFrame.Visible = false PlayerFrame.Visible = true end)
